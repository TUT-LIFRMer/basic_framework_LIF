# INA226模块编写需求

我接下来需要按照这份工程的代码封装格式，写一个使用INA226的电源测量模块。接下来我会将这份代码的详细需求与模块信息在下面告诉你。

---

## INA226模块信息

分流电阻为10mΩ，I2C地址为0x40（仅为默认，可能改变），连接于C板的&hi2c2的通道（可能变更），其他所需信息在编写时告诉我。

---

## 需求代码逻辑

### 初始化实例

在实际使用时，可在需要的地方首先初始化该模块，传入以下config参数：

- 分流电阻枚举选择（2mΩ或10mΩ）
- 该模块的I2C地址（不传入则默认为0x40）
- 该模块的通道
- 该模块实例化对象的名称（可自定义）
- 该模块I2C工作模式（在bsp_iic.h中已定义为枚举类型，我们使用中断模式）

### 发送呼叫命令

初始化完成后，定义一个函数，向指定名称的INA226模块发送一呼叫激活命令，使其向串口返回一帧数据。当发送结束后，进入回调函数。

### 在回调函数中解析数据帧

在回调函数中，解析收到的INA226模块的数据帧，获取电压、电流、功率等信息，并将这些数据作为回调函数的结构体返回值。

---

## 你可能需要查阅的文件

- bsp_iic.h：I2C驱动头文件，其中包含了I2C中断模式的定义。
- chasis.c：你需要查阅其中DJIMotorInit函数，模仿其实例化的结构与方法，根据此来编写你的代码。
  
以上文件你可能一同需要查阅其中函数与结构体定义的摘要，以符合我对于代码格式的需求。

---

## 我的命令

在power_meter文件夹内，参阅power_meter_temp.c，power_meter_temp.h，编写符合我要求的power_meter.c，power_meter.h文件。可以自行查阅工作区内任何你需要的文件，但不要在power_meter文件夹以外创建新的文件